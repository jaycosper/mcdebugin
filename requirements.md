# Project _McDebugin_
A simple, hand-held modern stand-alone alternative to the venerable Fluke 9010A Micro-System Troubleshooter. Focus is on easy to understand user interface and common test features, but not a full-fledged replacement product.

Device should be as easy to use as a DMM.

# Requirements

## Physical Dimensions
| Specification | Value | Notes |
|----------|-------------|------|
| Product | Approximately 100mm W x 250mm L x 50mm T| - |
| Pod | Approximately 75mm W x 25mm L| - |
| Display | Less than 3" |https://www.adafruit.com/product/4694 https://www.adafruit.com/product/2674 https://www.adafruit.com/product/1774 https://www.adafruit.com/product/198 |

## Interfaces
| Specification | Value | Notes |
|----------|-------------|------|
| Power | DC Input < 10W, power switch, indicator | Battery optional |
| SD Card | TBD GB, Micro | size for FW upgrades, custom routines, and ROM file storage |
| Keypad | Numbers 0x0-0xF, _enter_ key, 4+ Function | mechanical preferred |
| Probe | Standard bayonet coax | oscilloscope compatible |
| CPU Connection | Depends on TBD Pod architecture | 6-40 connections |
| LEDs | General Use | Minimum 4: unit power, target power, SD access, target clock lock, pod link status |

###  Keypad Layout
_Traditional_

16 keys
| | | | |
|-|-|-|-|
| C | D | E | F |
| 8 | 9 | A | B |
| 4 | 5 | 6 | 7 |
| 0 | 1 | 2 | 3 |

_Numpad style_

25 keys
| F1 | F2 | F3 | F4 |
|-|-|-|-|
| D | E | F | a0 |
| A | B | C | a1 |
| 7 | 8 | 9 | a2 |
| 4 | 5 | 6 | a3 |
| 1 | 2 | 3 | a4 |
| 0 | | ESC | a5 |

zero key is double

a3 - a5 => ENTER

a0 - a2 => single keys; CLEAR, STATUS/CONTROL, MORE, RUN, STOP

## Pod
| Specification | Value | Notes |
|----------|-------------|------|
| Board Size | low-profile to fit into socket between board stack | socket+pod < 15mm
| Target Board Connection | machined headers, requires socket on target board | - |
| Supported CPUs | Z80, 6502, 6809 (40-pin DIP) | Other pinouts possible |
| Supported Clock Rates | < 20MHz | - |
| Bidirectional Pins | All IO pins | 8-bit bus typical |
| +5V Support | All IO pins | +5V tolerant may not be enough |
| Hi-Z Support | Data pins | - |

### Emulation Option #1 Parallel
Pod is simply a breakout/level translator. All signals are generated by main unit and cabled to pod. Emulation performed by main unit.

Processor support handled in main unit and new processor support managed via SD card upgrade and new pod interface.

### Emulation Option #2 Serial
Simple serial (rate TBD) connection between main unit and pod. All level translation and emulation takes place on pod itself via uC/FPGA/CPLD.

Serial traffic sends basic commands which will be common to most target processors:
- GetPodStatus (target processor, version, voltage, etc.)
- GetPodMode
- SetPodMode
- GetPinState
- ReadIO _address_ _number-of-bytes_
- WriteIO _address_ _number-of-bytes_ _data_
- etc...

Processor support handled in Pod and new processor support _could_ be as simple as using a new pod interface with same common serial command interface.

## Features
| Specification | Value | Notes |
|----------|-------------|------|
| Clock detection | Detects clock from target board and reports frequency/variation | - |
| TBD | TBD | - |
| TBD | TBD | - |
| TBD | TBD | - |
| TBD | TBD | - |
| TBD | TBD | - |

## Functions/Tests
- Clock Frequency
    - detect and report frequency
    - report not clock detected
- Read/Write
    - any address
        - RAM
        - ROM
        - switches
        - IO ports
        - sound ports
        - etc...
- RAM
    - short test
    - long test
    - user specified range
    - sub-tests
        - walking 0's
        - walking 1's
        - random write/read
    - report failures/mismatches
    - loop test
- ROM
    - read and calculate CRC32
    - user specified range
    - save ROM file to flash
- Signature Analysis with Probe
    - TBD
    - https://arcarc.xmission.com/Web%20Archives/ionpool.net%20(Dec-31-2020)/arcade/signature_analysis/How_Atari_Signature_Analysis_Works.html
- Pins
    - Display live status of pins
        - interrupt / NMI
        - reset
    - test for shorts
- Run Mode
    - resets and starts free-running emulation
    - unit behaves as if it is target processor
- Custom Routines
    - loaded via SD card
    - coding language TBD
    - Board-specific tests or pre-test configuation
    - User-define test groupings or automations

# TODO
1. Decide on emulation options
2. How to run tests? Manual control of pins, or run small native routine? How to get data if running a routine?
3. How does free-running emulation work?
